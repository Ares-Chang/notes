(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{474:function(e,t,r){"use strict";r.r(t);var a=r(26),v=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h2",{attrs:{id:"关于"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#关于"}},[e._v("#")]),e._v(" 关于")]),e._v(" "),r("p",[e._v("近期产品新提需求：能否在 H5 推广页中打开小程序转换用户流量。")]),e._v(" "),r("p",[e._v("刚好这两天翻看微信小程序后台，发现工具栏中多了个生成 "),r("code",[e._v("URL Scheme")]),e._v(" 的工具。")]),e._v(" "),r("p",[e._v("点开简介说明：")]),e._v(" "),r("blockquote",[r("p",[e._v("小程序 URL Scheme 可以从微信外部打开小程序。")])]),e._v(" "),r("h2",{attrs:{id:"解决方法"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[e._v("#")]),e._v(" 解决方法")]),e._v(" "),r("h3",{attrs:{id:"生成"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#生成"}},[e._v("#")]),e._v(" 生成")]),e._v(" "),r("p",[r("code",[e._v("URL Scheme")]),e._v(" 可以通过 "),r("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/url-scheme/urlscheme.generate.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("服务端接口"),r("OutboundLink")],1),e._v(" 或在 "),r("a",{attrs:{href:"https://mp.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("小程序管理后台"),r("OutboundLink")],1),e._v("「工具」-「生成 URL Scheme」获取打开小程序任意页面的 URL Scheme。")]),e._v(" "),r("p",[e._v("通过 URL Scheme 打开小程序的场景值为 1065。")]),e._v(" "),r("p",[e._v("生成的 URL Scheme 如下所示：")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("weixin://dl/business/?t= *TICKET*\n")])])]),r("h3",{attrs:{id:"使用"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[e._v("#")]),e._v(" 使用")]),e._v(" "),r("p",[e._v("仔细看一下 "),r("code",[e._v("URL Scheme")]),e._v(" 的 "),r("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/url-scheme.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档说明"),r("OutboundLink")],1),e._v(" 发现。")]),e._v(" "),r("p",[e._v("因为系统差异问题：")]),e._v(" "),r("p",[e._v("iOS 系统可以直接识别 "),r("code",[e._v("URL Scheme")]),e._v(" 可以直接通过 Scheme 跳转小程序。")]),e._v(" "),r("p",[e._v("但是 Android 系统内是不支持直接识别 "),r("code",[e._v("URL Scheme")]),e._v(" 的，需要开发者使用 H5 页面进行中转，再跳转到 Scheme 实现打开小程序。")]),e._v(" "),r("p",[e._v("可以简单理解为：")]),e._v(" "),r("p",[e._v("iOS 系统内可以直接点击使用 "),r("code",[e._v("URL Scheme")]),e._v(" 生成的链接，但是因为无法确定用户所用机型及系统。")]),e._v(" "),r("p",[e._v("我们最好使用 H5 页面跳转的方法来实现。")]),e._v(" "),r("p",[e._v("跳转代码示例如下：")]),e._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[e._v("location"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("href "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'weixin://dl/business/?t= *TICKET*'")]),e._v("\n")])])]),r("p",[e._v("该跳转方法可以在用户打开 H5 时立即调用，也可以在用户触发事件后调用。")]),e._v(" "),r("h3",{attrs:{id:"调用上限"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#调用上限"}},[e._v("#")]),e._v(" 调用上限")]),e._v(" "),r("p",[e._v("Scheme 将根据是否为到期有效与失效时间参数，分为"),r("strong",[e._v("短期有效Scheme")]),e._v("与"),r("strong",[e._v("长期有效Scheme")]),e._v("：")]),e._v(" "),r("ol",[r("li",[e._v("单个小程序每日生成 Scheme 上限为50万个（包含短期有效 Scheme 与长期有效 Scheme）")]),e._v(" "),r("li",[e._v("有效时间超过31天的 Scheme 或永久有效的 Scheme 为"),r("strong",[e._v("长期有效Scheme")]),e._v("，单个小程序总共可生成长期有效 Scheme 上限为10万个，请谨慎调用")]),e._v(" "),r("li",[e._v("有效时间不超过31天的 Scheme 为"),r("strong",[e._v("短期有效Scheme")]),e._v("，单个小程序生成短期有效 Scheme 不设上限")])]),e._v(" "),r("h3",{attrs:{id:"注意事项"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[e._v("#")]),e._v(" 注意事项")]),e._v(" "),r("ol",[r("li",[e._v("微信内的网页如需打开小程序请使用"),r("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_Open_Tag.html#%E5%BC%80%E6%94%BE%E6%A0%87%E7%AD%BE%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3",target:"_blank",rel:"noopener noreferrer"}},[e._v("微信开放标签-小程序跳转按钮"),r("OutboundLink")],1),e._v("，无公众号也可以直接使用小程序身份开发网页并免鉴权跳转小程序，见"),r("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/staticstorage/jump-miniprogram.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("云开发静态网站跳转小程序"),r("OutboundLink")],1),e._v("。符合开放范围的小程序可以"),r("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/staticstorage/msg-miniprogram.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("下发支持打开小程序的短信"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("该功能基本覆盖当前用户正在使用的微信版本，开发者无需进行低版本兼容")]),e._v(" "),r("li",[e._v("只能生成已发布的小程序的 URL Scheme")]),e._v(" "),r("li",[e._v("通过 URL Scheme 跳转到微信时，可能会触发系统弹框询问，若用户选择不跳转，则无法打开小程序。请开发者妥善处理用户选择不跳转的场景")]),e._v(" "),r("li",[e._v("部分浏览器会限制打开网页直接跳转，可参考示例网页设置跳转按钮")])]),e._v(" "),r("h3",{attrs:{id:"开放范围"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#开放范围"}},[e._v("#")]),e._v(" 开放范围")]),e._v(" "),r("p",[e._v("针对国内非个人主体小程序开放。")]),e._v(" "),r("h3",{attrs:{id:"示例"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[e._v("#")]),e._v(" 示例")]),e._v(" "),r("p",[e._v("示例使用了云开发静态网站托管搭建网页，无需公众号，只需准备好小程序和开通云开发。网页会判断所在的环境来觉得采用哪种跳转方式，如检测到微信客户端内，则免鉴权使用开放标签跳转，如检测到在外部浏览器或 App，则使用 URL Scheme 跳转小程序。")]),e._v(" "),r("p",[e._v("示例网页地址："),r("strong",[e._v("https://postpay-2g5hm2oxbbb721a4-1258211818.tcloudbaseapp.com/jump-mp.html")])]),e._v(" "),r("img",{staticClass:"zoom",staticStyle:{width:"120px"},attrs:{src:e.$withBase("/web/uni-app/wx-URL-Scheme/jump-mp.png")}}),e._v(" "),r("p",[e._v("详细代码示例和说明："),r("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/staticstorage/jump-miniprogram.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("云开发静态网站跳转小程序"),r("OutboundLink")],1),e._v("。")]),e._v(" "),r("br"),e._v(" "),r("p",[e._v("以上说明搬运自微信文档，若无法理解可直接参考"),r("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/url-scheme.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方文档"),r("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=v.exports}}]);